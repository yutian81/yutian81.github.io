import{_ as s,c as i,G as a,b as t}from"./chunks/framework.BrC0DRXd.js";const l=JSON.parse('{"title":"支持 API 调用的短链接服务","description":"这是一个使用 Cloudflare Worker 和 KV 创建的免费短链接服务，支持自定义短链，支持 QRcode 二维码，还有多种玩法，比如：变身网络记事本 pastebin、变身图床 imghost、变身网络日记本 journal 等。支持 API 调用。","frontmatter":{"title":"支持 API 调用的短链接服务","filename":2025040401,"tags":["API","cloudflare","github"],"categories":["技术分享"],"date":"2025-04-03T00:00:00.000Z","description":"这是一个使用 Cloudflare Worker 和 KV 创建的免费短链接服务，支持自定义短链，支持 QRcode 二维码，还有多种玩法，比如：变身网络记事本 pastebin、变身图床 imghost、变身网络日记本 journal 等。支持 API 调用。","articleGPT":null,"cover":"https://i1.wp.com/dev.ruom.top/i/2025/04/04/597560.webp","top":null,"share":true,"delete":null,"head":[["link",{"rel":"canonical","href":"https://blog2.811520.xyz/posts/2025-04/2025040401"}]]},"headers":[],"relativePath":"posts/2025-04/2025040401.md","filePath":"posts/2025-04/2025040401.md","lastUpdated":1749884258000}');const e=s({name:"posts/2025-04/2025040401.md"},[["render",function(s,l,e,n,r,o){return t(),i("div",null,l[0]||(l[0]=[a('<h1 id="支持-api-调用的短链接服务" tabindex="-1">支持 API 调用的短链接服务 <a class="header-anchor" href="#支持-api-调用的短链接服务" aria-label="Permalink to &quot;支持 API 调用的短链接服务&quot;">​</a></h1><p>这是一个使用 Cloudflare Worker 和 KV 创建的免费短链接服务，支持自定义短链，支持 QRcode 二维码，还有多种玩法，比如：变身网络记事本 pastebin、变身图床 imghost、变身网络日记本 journal 等。支持 API 调用。</p><p>原项目地址：<a href="https://github.com/crazypeace/Url-Shorten-Worker" target="_blank" rel="noreferrer">GitHub - crazypeace/Url-Shorten-Worker</a></p><p>修改点：修改默认主题，美化前端页面；隐藏管理密码；不开启 VISIT_COUNT 时隐藏统计按钮；增加复制短链接按钮</p><h2 id="一-核心功能" tabindex="-1">一. 核心功能 <a class="header-anchor" href="#一-核心功能" aria-label="Permalink to &quot;一. 核心功能&quot;">​</a></h2><h3 id="短链接生成与管理" tabindex="-1">短链接生成与管理 <a class="header-anchor" href="#短链接生成与管理" aria-label="Permalink to &quot;短链接生成与管理&quot;">​</a></h3><ul><li><strong>智能生成短链</strong>：自动生成 5-7 位字符的短链接 key（可自定义长度）</li><li><strong>自定义短链</strong>：允许用户指定特定的短链接后缀（需启用 <code>custom_link</code>，默认关闭）</li><li><strong>唯一短链模式</strong>：相同长 URL 始终生成相同短链（需启用 <code>unique_link</code>，默认开启）</li><li><strong>批量管理</strong>：支持查询、添加、删除所有短链接（需启用 <code>load_kv</code>，默认开启)</li></ul><h2 id="二-高级功能" tabindex="-1">二. 高级功能 <a class="header-anchor" href="#二-高级功能" aria-label="Permalink to &quot;二. 高级功能&quot;">​</a></h2><ul><li><strong>阅后即焚</strong>：链接被访问后自动删除（<code>snapchat_mode</code>，默认关闭）</li><li><strong>访问统计</strong>：记录每个短链接的点击次数（<code>visit_count</code>，默认关闭）</li><li><strong>多主题支持</strong>：内置默认主题，可切换不同前端主题（如 <code>theme/urlcool</code> 主题）</li><li><strong>扩展功能</strong><ul><li>通过修改 <code>system_type</code> 可扩展为：</li><li>短文本分享系统（pastebin）</li><li>笔记系统（journal）</li><li>图床系统 (imghost)</li></ul></li></ul><h2 id="三-部署教程" tabindex="-1">三. 部署教程 <a class="header-anchor" href="#三-部署教程" aria-label="Permalink to &quot;三. 部署教程&quot;">​</a></h2><h3 id="_1-准备工作" tabindex="-1">1. 准备工作 <a class="header-anchor" href="#_1-准备工作" aria-label="Permalink to &quot;1. 准备工作&quot;">​</a></h3><ul><li>一个 Cloudflare 账户</li><li>一个域名（可选，但推荐使用）</li><li>GitHub 账户（用于获取源码）</li></ul><h3 id="部署方法-使用-cf-workers" tabindex="-1">部署方法：使用 CF Workers <a class="header-anchor" href="#部署方法-使用-cf-workers" aria-label="Permalink to &quot;部署方法：使用 CF Workers&quot;">​</a></h3><ol><li><strong>Fork 项目并修改代码</strong><ul><li>访问 <a href="https://github.com/yutian81/slink/" target="_blank" rel="noreferrer">GitHub 仓库</a>，点击 &quot;Fork&quot; 按钮</li><li>启用 pages：进入你的 fork 后的仓库设置，找到 &quot;Pages&quot; 选项，选择主分支作为源，点击 &quot; 保存 &quot;</li><li>获取到你的 <code>main.js</code> 地址，类似这样</li></ul></li></ol><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//你的用户名.github.io/你的仓库名/main.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>给他加上 cdn，得到类似这样的地址，记录下来：</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//cdn.jsdelivr.net/gh/用户名/仓库名/main.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>回到你 fork 的 GitHub 项目，打开根目录的 <code>index.html</code>，拉到最下面修改：</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 原始代码</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://pan.811520.xyz/cdn/slink.main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 改为你的 cdn 地址</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://cdn.jsdelivr.net/gh/用户名/仓库名/main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>继续修改 <code>_worker.js</code>，找到以下两行（约 26 行）并修改：</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 原始代码</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index_html </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://yutian81.github.io/slink/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/index.html&quot;</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result_html </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://yutian81.github.io/slink/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/result.html&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 改为你自己的仓库 pages 页面</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index_html </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://用户名.github.io/仓库名/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/index.html&quot;</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result_html </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://用户名.github.io/仓库名/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/result.html&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><strong>为什么要修改代码？如果你不改，拉取的是我的代码和主题</strong></p><p><strong>我会经常更新，说不定还有 bug，会直接影响到你的使用</strong></p><p><strong>因此，建议 fork 以后按以上说明修改</strong></p></blockquote><ol><li><p><strong>创建 Worker</strong></p><ul><li>进入 CF 的 Workers 和 Pages 页面，创建一个 worker，名称随意填</li><li>复制 <a href="https://github.com/yutian81/slink/" target="_blank" rel="noreferrer">GitHub 仓库</a> 中的 <code>_worker.js</code> 内容</li><li>粘贴到 Worker 编辑器中，点击 &quot; 保存并部署 &quot;</li></ul></li><li><p><strong>配置 KV 命名空间</strong>(必须)</p><ul><li>创建一个新的 KV 命名空间（如 &quot;LINKS&quot;）</li><li>在 Worker 设置中找到 &quot;KV 命名空间绑定 &quot;，变量名称填写 <code>LINKS</code>（不能是其他名称），绑定刚刚创建的 KV 空间，保存</li></ul></li><li><p><strong>配置环境变量</strong></p><ul><li>在 Worker 设置中找到 &quot; 变量 &quot;，添加以下变量（根据需要）： <ul><li><code>PASSWORD</code>，必须: 管理密码</li><li><code>THEME</code>，可选: 不设置则启用默认主题，也可设置为 <code>theme/urlcool</code></li><li><code>CUSTOM_LINK</code>，可选：是否开启自定义短链后缀，默认关闭，设为 <code>true</code> 可开启</li><li><code>VISIT_COUNT</code>，可选：是否开启访问统计，默认关闭，设为 <code>true</code> 可开启</li><li><code>TYPE</code>，可选: 系统类型，默认为 <code>shorturl</code>，即短链接，也可设置为其他类型，用法多样，详见 <a href="./2025040401##原作者教程">原作者教程</a></li><li><code>LOAD_KV</code>，可选: 是否加载 kv 数据，默认关闭，设为 <code>true</code> 可开启</li><li><strong>注意</strong>：<em>开启 VISIT_COUNT 和 LOAD_KV 会大大增加 KV 的读写量，自用没有什么关系，如果对外作为公益服务，最好不要开启，避免 KV 读写超限。</em></li></ul></li></ul></li><li><p><strong>访问项目管理页面</strong><br> 访问 <code>https://your-worker.your-account.workers.dev/your_password</code> 使用管理界面<br> 可绑定自定义域，绑定后访问 <code>https://your-domain/your_password</code></p></li><li><p><strong>DEMO 界面</strong>（仅界面展示，无法进行任何操作）<br><a href="https://blog.24811213.xyz/slink/" target="_blank" rel="noreferrer">短链接生成器 | Cloudflare Worker</a></p></li></ol><p><a class="img-fancybox" href="https://tgfile.yuzong.nyc.mn/1743738746960.png" data-fancybox="gallery" data-caption=""><img class="post-img" src="https://tgfile.yuzong.nyc.mn/1743738746960.png" alt="" loading="lazy"><span class="post-img-tip"></span></a></p><h2 id="四-注意事项" tabindex="-1">四. 注意事项 <a class="header-anchor" href="#四-注意事项" aria-label="Permalink to &quot;四. 注意事项&quot;">​</a></h2><ol><li><strong>密码安全</strong>：确保设置强密码并定期更换</li><li><strong>KV 限制</strong>：Cloudflare KV 有写入次数限制，频繁操作可能导致超额</li><li><strong>自定义域名</strong>：如需使用自定义域名，需在 Cloudflare 中配置 DNS 和 Workers 路由</li><li><strong>备份</strong>：定期导出 KV 数据作为备份</li></ol><h2 id="五-api-调用" tabindex="-1">五. API 调用 <a class="header-anchor" href="#五-api-调用" aria-label="Permalink to &quot;五. API 调用&quot;">​</a></h2><div class="table-container"><table><thead><tr><th>命令</th><th>方法</th><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>add</td><td>POST</td><td>url, password, [key]</td><td>创建短链接</td></tr><tr><td>del</td><td>POST</td><td>key, password</td><td>删除短链接</td></tr><tr><td>qry</td><td>POST</td><td>key, password</td><td>查询短链接</td></tr><tr><td>qryall</td><td>POST</td><td>password</td><td>查询所有短链接</td></tr><tr><td>config</td><td>POST</td><td>password</td><td>获取设置详情</td></tr></tbody></table></div><p>详见 <a href="https://github.com/yutian81/slink/blob/main/API.md" target="_blank" rel="noreferrer">API说明文档</a></p><h1 id="原作者教程" tabindex="-1">原作者教程 <a class="header-anchor" href="#原作者教程" aria-label="Permalink to &quot;原作者教程&quot;">​</a></h1><p><a href="https://github.com/crazypeace/Url-Shorten-Worker/blob/main/README.md" target="_blank" rel="noreferrer">Url-Shorten-Worker/README.md</a></p><p>#API #cloudflare #github</p>',32)]))}]]);export{l as __pageData,e as default};
